{
  "project": "tagging-rugby-cli",
  "branchName": "ralph/control-box-rounded",
  "description": "Replace RenderControlBox tab-header style with RenderInfoBox rounded design for column 4 control groups, remove sub-group dividers, delete dead RenderControlBox function",
  "userStories": [
    {
      "id": "US-001",
      "title": "Replace RenderControlBox with RenderInfoBox in renderColumn4",
      "description": "As a user, I want the control groups in column 4 to use the same rounded border style as all other containers so the UI looks consistent.",
      "acceptanceCriteria": [
        "renderColumn4 in tui/columns.go builds content lines for each control group and passes them to components.RenderInfoBox(group.Name, contentLines, width)",
        "renderColumn4 no longer calls components.RenderControlBox",
        "Each control row is formatted as ' Name    [ Shortcut ]' with left-aligned name (LightLavender) and shortcut (Cyan bold [ Shortcut ])",
        "Names are left-padded to the max name width within each group for alignment",
        "No horizontal dividers between sub-groups — all controls listed as plain contiguous rows",
        "The 1 blank line gap between control group boxes is preserved",
        "The outer layout.Container call remains to guarantee exact column dimensions",
        "Typecheck passes (CGO_ENABLED=0 go vet ./...)"
      ],
      "priority": 1,
      "passes": false,
      "notes": "In renderColumn4 (tui/columns.go line ~112), replace the call to components.RenderControlBox(group, width) with inline row building. For each ControlGroup: (1) Find maxNameW by iterating all SubGroups' controls. (2) Flatten all SubGroups into a single list of rows (no dividers). (3) Format each row: namePart = nameStyle.Render(fmt.Sprintf(\"%-*s\", maxNameW, c.Name)), shortcutPart = shortcutStyle.Render(\"[ \" + c.Shortcut + \" ]\"), contentStr = \" \" + namePart + \"  \" + shortcutPart. The leading space provides padding inside the InfoBox. (4) Collect rows into contentLines []string. (5) Call components.RenderInfoBox(group.Name, contentLines, width). Styles needed: nameStyle = lipgloss.NewStyle().Foreground(styles.LightLavender), shortcutStyle = lipgloss.NewStyle().Foreground(styles.Cyan).Bold(true). These imports are already in tui/columns.go."
    },
    {
      "id": "US-002",
      "title": "Delete RenderControlBox function",
      "description": "As a developer, I want dead code removed so the codebase stays clean.",
      "acceptanceCriteria": [
        "The RenderControlBox function is deleted from tui/components/controls.go (the function and its docstring/wireframe comment)",
        "No remaining references to RenderControlBox exist in the codebase (verify with grep)",
        "The 'ansi' import (charmbracelet/x/ansi) is removed from controls.go since RenderControlBox was its only user (line 229 was the only ansi.Truncate call)",
        "All other imports in controls.go are preserved (fmt, strings, lipgloss, timeutil, styles are still used by other functions)",
        "Typecheck passes (CGO_ENABLED=0 go vet ./...)"
      ],
      "priority": 2,
      "passes": false,
      "notes": "Delete the entire RenderControlBox function from tui/components/controls.go — this includes the docstring comment block (lines ~133-144 with wireframe) and the function body (lines ~145-246). After deletion, remove the ansi import (line 9: \"github.com/charmbracelet/x/ansi\") since ansi.Truncate on line 229 was the only usage. Keep all other imports: fmt (used by RenderVideoBox line ~277), strings (used throughout), lipgloss (used throughout), timeutil (used by RenderVideoBox), styles (used throughout). Run 'CGO_ENABLED=0 go vet ./...' to verify no unused imports remain."
    },
    {
      "id": "US-003",
      "title": "Update TUI-ARCHITECTURE.md to reflect control box change",
      "description": "As a developer, I want the architecture doc to accurately describe the control rendering.",
      "acceptanceCriteria": [
        "The Directory Structure section (line ~27) for controls.go removes 'RenderControlBox()' from the description",
        "The Controls section (line ~153) removes the RenderControlBox signature line",
        "The Controls section adds a note that control groups are rendered via RenderInfoBox in renderColumn4",
        "The ControlGroup struct description (line ~154) is preserved since it's still used",
        "No other sections are modified unnecessarily",
        "Typecheck passes (CGO_ENABLED=0 go vet ./...)"
      ],
      "priority": 3,
      "passes": false,
      "notes": "File: tui/TUI-ARCHITECTURE.md. Three spots to update: (1) Line ~27 directory structure: controls.go description currently says 'ControlGroup, GetControlGroups(), RenderControlBox()' — remove 'RenderControlBox()'. (2) Line ~153: remove the line '- **Signature:** `RenderControlBox(group ControlGroup, width int) string` — renders bordered box'. (3) Add a note near the Controls section that control groups are now rendered using RenderInfoBox in renderColumn4 (e.g., '- Control groups in column 4 are rendered by `renderColumn4` using `RenderInfoBox` for each group'). Keep the ControlGroup struct description on line ~154."
    }
  ]
}
